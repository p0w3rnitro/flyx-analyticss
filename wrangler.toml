name = "flyx-analyticss"
main = "src/index.ts"
compatibility_date = "2025-12-07"

[observability]
enabled = true

[vars]
LOG_LEVEL = "info"
HEARTBEAT_INTERVAL = "60"

# =============================================================================
# DURABLE OBJECTS
# =============================================================================
[[durable_objects.bindings]]
name = "ANALYTICS_DO"
class_name = "AnalyticsDO"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["AnalyticsDO"]

# =============================================================================
# D1 DATABASE
# =============================================================================
[[d1_databases]]
binding = "DB"
database_name = "flyx-analytics-db"
database_id = "ac392842-a484-4e6e-a4dc-f4880b9e7858"

# =============================================================================
# PRODUCTION ENV
# =============================================================================
[env.production]
name = "flyx-analytics"

[env.production.vars]
LOG_LEVEL = "warn"
HEARTBEAT_INTERVAL = "60"

[[env.production.durable_objects.bindings]]
name = "ANALYTICS_DO"
class_name = "AnalyticsDO"

# =============================================================================
# DEVELOPMENT ENV
# =============================================================================
[env.development]
name = "flyx-analytics-dev"

[env.development.vars]
LOG_LEVEL = "debug"
HEARTBEAT_INTERVAL = "10"

[[env.development.durable_objects.bindings]]
name = "ANALYTICS_DO"
class_name = "AnalyticsDO"
